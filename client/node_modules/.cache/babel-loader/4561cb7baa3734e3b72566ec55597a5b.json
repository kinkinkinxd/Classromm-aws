{"ast":null,"code":"var _jsxFileName = \"/Users/kin/Desktop/Classroom-aws/client/src/components/Posts/Posts.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport qs from 'qs';\nimport styles from './Posts.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Posts = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [postTitle, setPostTitle] = useState(\"\");\n  const [comments, setComments] = useState({});\n  const location = useLocation();\n  const params = qs.parse(location.search.substring(1));\n  const classId = params.classId;\n  const createPost = async e => {\n    e.preventDefault();\n    const res = await axios.post('http://localhost:4002/create_post', {\n      classId,\n      postTitle\n    });\n    setPosts(res.data);\n    setPostTitle(\"\");\n\n    // eslint-disable-next-line array-callback-return\n    Object.values(res.data).map(post => {\n      comments[post.id] = \"\";\n    });\n  };\n  const commentHandler = (e, postId) => {\n    setComments({\n      ...comments,\n      [postId]: e.target.value\n    });\n  };\n  const createComment = async (e, postId) => {\n    e.preventDefault();\n    setComments(comments);\n\n    // make add_comment axios request here\n    await axios.post('http://localhost:4002/add_comment', {\n      id: postId,\n      class: classId,\n      text: comments[postId]\n    });\n  };\n  const renderComments = commentArr => {\n    var allComments = /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 23\n    }, this);\n    allComments = Object.values(commentArr).map(text => {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.commentTitle,\n        children: [\"C: \", text]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this);\n    });\n    return allComments;\n  };\n  var renderedPosts = /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 24\n  }, this);\n  if (Object.keys(posts).length > 0) {\n    renderedPosts = Object.values(posts).map(post => {\n      console.log('rendering posts.');\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.singlePost,\n        onSubmit: e => createComment(e, post.id),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.postTitle,\n          children: [\"Q: \", post.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), renderComments(post.comments), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: post.id,\n          className: styles.commentText,\n          value: comments[post.id] || \"\",\n          type: \"text\",\n          onChange: e => commentHandler(e, post.id),\n          required: true,\n          placeholder: \"Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.commentBtn,\n          children: \"COMMENT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, post.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 10\n      }, this);\n    });\n  }\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = await axios.get('http://localhost:4002/get_posts/' + classId);\n      setPosts(res.data);\n    };\n    fetchPosts();\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.centerPosts,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.colorBox\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: styles.classTitle,\n      children: params.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: createPost,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles.postText,\n        value: postTitle,\n        type: \"text\",\n        onChange: e => setPostTitle(e.target.value),\n        required: true,\n        placeholder: \"Make a post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.postBtn,\n        children: \"POST\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.allPosts,\n      children: renderedPosts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(Posts, \"8vL4h+HXCCEsQC/YqDLhQwvkrN0=\", false, function () {\n  return [useLocation];\n});\n_c = Posts;\nexport default Posts;\nvar _c;\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","axios","qs","styles","jsxDEV","_jsxDEV","Posts","_s","posts","setPosts","postTitle","setPostTitle","comments","setComments","location","params","parse","search","substring","classId","createPost","e","preventDefault","res","post","data","Object","values","map","id","commentHandler","postId","target","value","createComment","class","text","renderComments","commentArr","allComments","fileName","_jsxFileName","lineNumber","columnNumber","className","commentTitle","children","renderedPosts","keys","length","console","log","singlePost","onSubmit","title","name","commentText","type","onChange","required","placeholder","commentBtn","fetchPosts","get","centerPosts","colorBox","classTitle","postText","postBtn","allPosts","_c","$RefreshReg$"],"sources":["/Users/kin/Desktop/Classroom-aws/client/src/components/Posts/Posts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport qs from 'qs';\n\nimport styles from './Posts.module.css';\n\nconst Posts = () => {\n  const [posts, setPosts] = useState([]);\n  const [postTitle, setPostTitle] = useState(\"\");\n  const [comments, setComments] = useState({});\n  const location = useLocation();\n  const params = qs.parse(location.search.substring(1));\n  const classId = params.classId;\n\n  const createPost = async (e) => {\n    e.preventDefault();\n    const res = await axios.post('http://localhost:4002/create_post', { classId, postTitle });\n    setPosts(res.data);\n    setPostTitle(\"\");\n\n    // eslint-disable-next-line array-callback-return\n    Object.values(res.data).map(post => {\n      comments[post.id] = \"\";\n    });\n  }\n\n  const commentHandler = (e, postId) => {\n    setComments({...comments, [postId]:e.target.value});\n  }\n\n  const createComment = async (e, postId) => {\n    e.preventDefault();\n    setComments(comments);\n\n    // make add_comment axios request here\n    await axios.post('http://localhost:4002/add_comment', {\n      id: postId,\n      class: classId,\n      text: comments[postId]\n    });\n  }\n\n  const renderComments = (commentArr) => {\n\n    var allComments = <div></div>;\n    allComments = Object.values(commentArr).map(text => {\n      return (\n        <p className={styles.commentTitle}>C: {text}</p>\n      )\n    })\n\n    return allComments\n  }\n\n   var renderedPosts = <div></div>;\n   if (Object.keys(posts).length > 0) {\n     renderedPosts = Object.values(posts).map(post => {\n       console.log('rendering posts.');\n       return (\n         <form key={post.id} className={styles.singlePost} onSubmit={e => createComment(e, post.id)}>\n            <p className={styles.postTitle}>\n              Q: {post.title}\n            </p>\n            {renderComments(post.comments)}\n            <input\n              name={post.id}\n              className={styles.commentText}\n              value={comments[post.id] || \"\"}\n              type=\"text\"\n              onChange={e => commentHandler(e, post.id)}\n              required\n              placeholder=\"Comment\"\n            />\n            <button className={styles.commentBtn}>COMMENT</button>\n\n          </form>\n       );\n     });\n   }\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = await axios.get('http://localhost:4002/get_posts/' + classId);\n      setPosts(res.data);\n    };\n    \n    fetchPosts();\n  });\n\n  return (\n    <div className={styles.centerPosts}>\n    <div className={styles.colorBox}></div>\n    <h2 className={styles.classTitle}>{params.title}</h2>\n\n      <form onSubmit={createPost}>\n        <input\n          className={styles.postText}\n          value={postTitle}\n          type=\"text\"\n          onChange={e => setPostTitle(e.target.value)}\n          required\n          placeholder=\"Make a post\"\n        />\n        <button className={styles.postBtn}>POST</button>\n      </form>\n      <div className={styles.allPosts}>\n        {renderedPosts}\n      </div>\n    </div>\n  );\n}\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}